"use strict";var f=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var J=Object.prototype.hasOwnProperty;var N=(t,r)=>{for(var s in r)f(t,s,{get:r[s],enumerable:!0})},O=(t,r,s,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of F(r))!J.call(t,n)&&n!==s&&f(t,n,{get:()=>r[n],enumerable:!(c=x(r,n))||c.enumerable});return t};var C=t=>O(f({},"__esModule",{value:!0}),t);var P={};N(P,{default:()=>j});module.exports=C(P);var e=require("@raycast/api");var w=require("@raycast/api"),y=require("path"),h=require("fs/promises"),g=require("child_process");async function D(t,...r){let s=(0,y.join)(w.environment.assetsPath,"compiled_raycast_swift/Ruler");return await(0,h.chmod)(s,"755"),new Promise((c,n)=>{let p=[t];for(let i of r)try{p.push(JSON.stringify(i,(o,a)=>a===void 0?null:a))}catch(o){n(new d("Failed to serialize input to JSON: "+o.message));return}let m=(0,g.spawn)(s,p),u=[],l=[];m.stdout?.on("data",i=>{u.push(i.toString())}),m.stderr?.on("data",i=>{l.push(i.toString())}),m.on("exit",i=>{if(i===0)try{let o=u.join("").trim();o.length!=0?c(JSON.parse(o)):c(null)}catch(o){let a=new d("Failed to deserialize result from JSON: "+o.message);a.stdout=u.join("").trim(),a.stderr=l.join("").trim(),n(a)}else{let o=new d(l.join("").trim()||u.join("").trim()||"Could not get any data");o.stdout=u.join("").trim(),o.stderr=l.join("").trim(),n(o)}}),m.on("error",i=>{n(i)})})}async function S(){return await D("measureDistance")}var d=class extends Error{constructor(r){super(r),this.name="SwiftError"}};async function j(){await(0,e.closeMainWindow)();try{let t=await S();if(!t)return;await e.Clipboard.copy(t),await(0,e.showToast)({style:e.Toast.Style.Success,title:"Copied distance to clipboard"})}catch{await(0,e.showToast)({style:e.Toast.Style.Failure,title:"Failed to calculate distance"})}}
